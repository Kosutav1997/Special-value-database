<!DOCTYPE html> 
<html lang="en"> 
<head> 
<meta charset="UTF-8" /> 
<title>CM Discriminant</title> 
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> 

<!-- MathJax --> 
<script> 
window.MathJax = { 
  tex: { 
    inlineMath: [['$', '$'], ['\\(', '\\)']], 
    displayMath: [['$$', '$$'], ['\\[', '\\]']] 
  }, 
  svg: { fontCache: 'global' } 
}; 
</script> 
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> 

<style> 
body { 
  font-family: Arial, sans-serif; 
  margin: 40px; 
  background-color: #fdfefe; 
  color: #111; 
} 
a.back-link { 
  text-decoration: none; 
  color: #003366; 
  font-weight: bold; 
  padding: 6px 10px; 
  border: 1px solid #003366; 
  border-radius: 5px; 
  background: #e6f0ff; 
} 
h1 { 
  text-align: center; 
  color: #003366; 
  margin-top: 20px; 
} 
table { 
  border-collapse: collapse; 
  margin: 40px auto; 
  min-width: 70%; 
} 
th, td { 
  border: 1px solid #ccc; 
  padding: 10px 14px; 
  text-align: center; 
  vertical-align: middle; 
} 
th { 
  background-color: #e6f0ff; 
  font-weight: bold; 
} 
.warning { 
  text-align: center; 
  color: #b00020; 
  font-style: italic; 
  margin-top: 20px; 
} 
footer { 
  margin-top: 50px; 
  text-align: center; 
  font-size: 14px; 
  color: #555; 
  border-top: 1px solid #ccc; 
  padding-top: 10px; 
} 
</style> 
</head> 

<body> 

<!-- Back link --> 
<div> 
  <a href="index.html" class="back-link">← Return to main page</a> 
</div> 

<h1 id="title"></h1> 
<div id="cm-container"></div> 

<footer> 
Special Values Database — CM points and modular invariants 
</footer> 

<script> 
const params = new URLSearchParams(window.location.search); 
const D = params.get("D"); 

if (!D) { 
  document.getElementById("title").textContent = 
    "No discriminant specified."; 
  throw new Error("Missing discriminant parameter."); 
} 

document.getElementById("title").textContent = 
  `CM Discriminant D = ${D}`; 

fetch(`data/D${D}.json`) 
  .then(response => { 
    if (!response.ok) { 
      throw new Error("JSON file not found"); 
    } 
    return response.json(); 
  }) 
  .then(data => { 
    const container = document.getElementById("cm-container"); 
    const cmPoints = data.cm_points || []; 

    if (cmPoints.length === 0) { 
      container.innerHTML = 
        `<p class="warning">No CM points available.</p>`; 
      return; 
    } 

    const table = document.createElement("table"); 

    /* ---------- Header ---------- */ 
    let headerRow = `<tr><th></th>`; 
    cmPoints.forEach((_, i) => { 
      headerRow += `<th>CM Point ${i + 1}</th>`; 
    }); 
    headerRow += `</tr>`; 

    /* ---------- Row helper ---------- */ 
    function row(label, values, math = false) { 
      let r = `<tr><th>${label}</th>`; 
      values.forEach(v => { 
        r += math 
          ? `<td>$$${v || "\\text{--}"}$$</td>` 
          : `<td>${v || "--"}</td>`; 
      }); 
      r += `</tr>`; 
      return r; 
    } 

    table.innerHTML = `
      ${headerRow}
      ${row("Class number", cmPoints.map(() => cmPoints.length))}
      ${row("$\\tau$", cmPoints.map(c => c.tau), true)}
      ${row("$j(\\tau)$", cmPoints.map(c => c.j_value?.exact), true)}
      ${row("$\\eta(\\tau)$", cmPoints.map(c => c.eta_value?.exact), true)}

      <!-- ✅ ADDED NOTES ROW (ONLY ADDITION) -->
      ${row("Notes", cmPoints.map(c => c.notes), true)}
    `; 

    container.appendChild(table); 
    MathJax.typesetPromise(); 
  }) 
  .catch(err => { 
    document.getElementById("cm-container").innerHTML = 
      `<p class="warning">
        Failed to load data for discriminant ${D}.
      </p>`; 
    console.error(err); 
  }); 
</script> 

</body> 
</html>
